webpackJsonp([46],{TCRi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=a("Dd8w"),n=a.n(c),s=a("NYxO"),o=a("6kks"),i=a("hrUx"),l=a("aM/G"),u=a("pWFc"),r={name:"getback1",components:{accountNav:o.a,imageTest:i.a},computed:n()({},Object(s.mapState)({getback:function(e){return e.lang.language.getback}})),data:function(){return{pageTitle:"---",getMessage:"---",accountVal:"",accountPlaceholder:"---",accountRemind:!1,accountRemindText:"",showValue:!1,inputVal:"",inputPlaceholder:"",isError:!1,getBtn:!0,count:"",caseUrl:"",backAccount:u.f.get("backAccount"),backAccountType:u.f.get("backAccountType"),mobileMessage:"---",emailMessage:"---",isGetGo:!0}},created:function(){var e=this.getback;this.getMessage=this.getback.title[1],this.pageTitle=e.title[0],this.accountPlaceholder=e.placeholder[1],this.inputPlaceholder=this.getback.placeholder[5],this.mobileMessage=e.alertMessage[0],this.emailMessage=e.alertMessage[1]},methods:{getCodeVal:function(e){this.inputVal=e},accountBlur:function(){""!=this.accountVal?(this.accountRemind=!1,this.accountRemindText=this.getback.remind[1]):(this.accountRemind=!1,this.accountRemindText=this.getback.remind[5])},accountEnter:function(){this.accountRemind=!1,this.accountVal=this.accountVal.replace(/[^\d]/g,"")},goNext:function(){var e=this,t=this;if(t.accountBlur(),t.accountVal){var a=[t.backAccountType,t.backAccount,t.accountVal],c=[t.backAccountType,t.accountVal];t.isLogin()?Object(l.r)(c,t.$refs.next).then(function(a){200===a.code&&a.data?(u.f.set("testCode",e.accountVal),t.$f7router.navigate("/getback/2")):(t.$vn.toast.show(a.message),t.accountRemind=!0)}):Object(l.q)(a,t.$refs.next).then(function(a){200===a.code&&a.data?(u.f.set("testCode",e.accountVal),t.$f7router.navigate("/getback/2")):(t.$vn.toast.show(a.message),t.accountRemind=!0)})}else t.accountRemind=!0},onConfirm:function(){var e=this,t=this;t.inputVal?Object(l.t)([t.backAccount,t.inputVal],t.$refs.getCase).then(function(a){200===a.code&&a.data?1==a.data&&(e.getMessage=e.getback.title[6],t.isGetGo=!1,t.getCase(),t.inputVal="",e.showValue=!1,e.$emit("on-confirm")):("_0"==t.backAccountType?t.caseUrl="/api/user/captcha/image/mobile/"+t.backAccount+"?v="+(Math.floor(1e3*Math.random())+1):t.caseUrl="/api/user/captcha/image/email/"+t.backAccount+"?v="+(Math.floor(1e3*Math.random())+1),t.inputVal="",t.isError=!0,t.inputPlaceholder=a.message)}):t.inputPlaceholder=t.getback.placeholder[5]},getCase:function(){var e=this,t=this;"_0"==t.backAccountType?Object(l._45)([t.backAccount],t.$refs.getCase).then(function(a){200===a.code&&a.data?(t.$vn.alert.show({text:t.mobileMessage}),e.getBtn=!1,t.countDown(t,function(){t.isGetGo=!0,t.getBtn=!0,e.getMessage=t.getback.title[7]})):(t.isGetGo=!0,t.getBtn=!0,e.getMessage=e.getback.title[7],t.$vn.toast.show(a.message))}):Object(l.I)(t.$refs.getCase,{email:t.backAccount}).then(function(a){200===a.code&&a.data?(t.$vn.alert.show({text:t.emailMessage,onShow:function(){},onHide:function(){}}),e.getBtn=!1,t.countDown(t,function(){t.isGetGo=!0,t.getBtn=!0,t.getMessage=t.getback.title[7]})):(t.getBtn=!0,t.isGetGo=!0,t.getMessage=t.getback.title[7],t.$vn.toast.show(a.message))})},popShow:function(){"_0"==this.backAccountType?this.caseUrl="/api/user/captcha/image/mobile/"+this.backAccount+"?v="+ +new Date:this.caseUrl="/api/user/captcha/image/email/"+this.backAccount+"?v="+ +new Date,this.isGetGo&&(this.showValue=!0,this.inputVal="")},changeCaseUrl:function(){"_0"==this.backAccountType?this.caseUrl="/api/user/captcha/image/mobile/"+this.backAccount+"?v="+ +new Date:this.caseUrl="/api/user/captcha/image/email/"+this.backAccount+"?v="+ +new Date}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("f7-page",{staticClass:"getback-body"},[a("account-nav",{attrs:{pageTitle:e.pageTitle}}),e._v(" "),a("div",{staticClass:"scroll-body"},[a("div",{staticClass:"main-place"},[a("div",{staticClass:"message-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.getBtn,expression:"getBtn"}],staticClass:"text-btn",on:{click:e.popShow}},[e._v(e._s(e.getMessage))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.getBtn,expression:"!getBtn"}],staticClass:"text-btn"},[e._v(e._s(e.count)+" s")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.accountVal,expression:"accountVal"}],class:["login-inp",{"error-red":e.accountRemind}],attrs:{type:"tel",maxlength:"6",placeholder:e.accountPlaceholder},domProps:{value:e.accountVal},on:{blur:e.accountBlur,input:[function(t){t.target.composing||(e.accountVal=t.target.value)},e.accountEnter],keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.goNext(t)}}}),e._v(" "),a("div",{staticClass:"error-remind"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.accountRemind,expression:"accountRemind"}]},[e._v(e._s(e.accountRemindText))])])]),e._v(" "),a("div",{ref:"next",staticClass:"button",on:{click:e.goNext}},[e._v(e._s(e.getback.title[2]))])])]),e._v(" "),a("image-test",{directives:[{name:"show",rawName:"v-show",value:e.showValue,expression:"showValue"}],attrs:{caseUrl:e.caseUrl,isError:e.isError,codeVal:e.inputVal,inputPlaceholder:e.inputPlaceholder},on:{changeCaseUrl:e.changeCaseUrl,onConfirm:e.onConfirm,codeVal:e.getCodeVal}})],1)},staticRenderFns:[]};var h=a("VU/8")(r,g,!1,function(e){a("qsdN")},"data-v-46e2e815",null);t.default=h.exports},qsdN:function(e,t){}});