webpackJsonp([10],{DHRo:function(t,e){},OBP9:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),o=(s("7+uW"),s("NYxO")),r=s("6kks"),n=s("nRsL"),l=s("Qqk1"),c=s("zfDY"),u=s("sqAx"),d=s("aM/G"),v=s("g5qD"),h=s("ipgl"),y={components:{AccountNav:r.a,OrderList:n.a,PickerDate:l.a,Scroller:c.a,NoData:u.a},computed:a()({},Object(o.mapState)({account:function(t){return t.lang.language.accountOrder}})),data:function(){return{orderStatus:h.f,exchange:"VNBIG",coinShow:!1,typeShow:!1,timeShow:!1,moneyVal:"",coinVal:"-1",typeVal:"-1",timeVal:"-1",code:"",moneyList:[],coinList:[],typeList:[],pageTitle:"",orderType:"",entrustData:[],historyData:[],entrustPage:0,historyPage:0,historyTotal:1,entrustEmpty:!1,historyEmpty:!1,limitPoint:{},historyTypeAll:h.f.done+","+h.f.cancel+","+h.f.someDone}},created:function(){var t=this;this.pageTitle=this.account.title,this.setTitle(this.pageTitle),this.filterInit(),setTimeout(function(){t.initType(),t.getPoint()},50)},watch:{orderType:function(){"entrust"===this.orderType?this.typeList=this.entrustType:this.typeList=this.historyType}},methods:{initType:function(){this.hideLoading();var t=this.$f7router.currentRoute.query;this.orderType=t.type||"entrust",t.code&&"-1"!==t.code&&(this.code=t.code)},filterInit:function(){var t=this.account,e={text:t.filterCoin[2],value:"-1",commodity:"-1"};this.entrustType=[e,{text:t.filterType[1],value:"B"},{text:t.filterType[2],value:"S"}],this.historyType=[e,{text:t.filterType[3],value:h.f.done},{text:t.filterType[5],value:h.f.someDone},{text:t.filterType[4],value:h.f.cancel}]},getPoint:function(){var t=this;Object(v.c)().then(function(e){t.limitPoint=e||{},t.getBaseList()})},getBaseList:function(){var t=this;Object(v.e)().then(function(e){t.moneyList=e,t.moneyVal=t.coinType(t.code,1)||e[0],t.getDealList()})},getDealList:function(){var t=this;Object(v.f)(this.moneyVal).then(function(e){t.coinList=e,t.coinVal=t.code||e[0].code,t.filterQuery()})},coinType:function(t,e){return(t=t||"").split("_")[e]||""},filterReset:function(){this.typeVal=this.timeVal="-1",this.moneyVal=""},orderTab:function(t){this.orderType=t,this.$f7router.navigate("/accountOrder?type="+t+"&code="+this.coinVal,{history:!1,animate:!1}),this.filterReset()},filterShow:function(t){this[t+"Show"]=!0},filterHide:function(t){this[t+"Show"]=!1},selectTime:function(t){var e=t[0].split("-");this.timeVal=e[0]+"-"+e[1],this.filterQuery()},coinText:function(t){return t.text?t.text:t.commodity},getOrderEntrust:function(){var t=this;if("entrust"===this.orderType){var e="";"-1"!==this.coinVal&&(e=this.coinVal),Object(d._29)(["0-100"],{code:e,status:h.f.canCancel}).then(function(e){if(t.hideLoading(),200===e.code&&e.data){var s=e.data;""==s.content?t.entrustEmpty=!0:t.entrustEmpty=!1,t.entrustData=s.content}})}},getOrderHistroy:function(){var t=this,e="",s="",i=this.historyTypeAll;"-1"!==this.coinVal&&(e=this.coinVal),"-1"!==this.timeVal&&(s=this.timeVal),"-1"!==this.typeVal&&(i=this.typeVal),Object(d._29)([this.historyPage+"-10"],{code:e,status:i,entrustTime:s}).then(function(e){if(200===e.code&&e.data){var s=e.data;s.content=s.content||[],t.historyTotal=s.totalPages-1,0===t.historyPage&&""==s.content?t.historyEmpty=!0:t.historyEmpty=!1,0===t.historyPage?t.historyData=s.content:t.historyData=t.historyData.concat(s.content)}})},filterQuery:function(){"entrust"===this.orderType?(this.entrustPage=0,this.getOrderEntrust()):(this.historyPage=0,this.getOrderHistroy())},moneySelected:function(t){this.moneyVal=t,this.code="",this.getDealList()},filterSelected:function(t,e){this[t+"Val"]=e,this[t+"Show"]=!1,this.filterQuery()},entrustLoad:function(){this.entrustPage+=1,this.$refs.entrustScroll.noMoreChange(!0)},historyLoad:function(){this.historyPage+=1,this.historyPage>this.historyTotal?this.$refs.historyScroll.noMoreChange(!0):(this.$refs.historyScroll.noMoreChange(!1),this.getOrderHistroy())},orderCancel:function(){this.filterQuery()}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("f7-page",{staticClass:"main-body"},[s("account-nav",{attrs:{pageTitle:t.pageTitle}}),t._v(" "),s("div",{staticClass:"scroll-body"},[s("div",{staticClass:"tab order-tab"},[s("span",{staticClass:"tab-list",class:{on:"entrust"===t.orderType},on:{click:function(e){t.orderTab("entrust")}}},[t._v("\n            "+t._s(t.account.tab[0])),t._v(" "),s("i",{staticClass:"line"})]),t._v(" "),s("span",{staticClass:"tab-list",class:{on:"history"===t.orderType},on:{click:function(e){t.orderTab("history")}}},[t._v("\n            "+t._s(t.account.tab[1]))])]),t._v(" "),s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.coinShow,expression:"coinShow"}],staticClass:"filter-popup"},[s("div",{staticClass:"mask",on:{click:function(e){t.filterHide("coin")}}}),t._v(" "),s("div",{staticClass:"content"},[s("span",{staticClass:"titles"},[t._v(t._s(t.account.filterCoin[0]))]),t._v(" "),s("ul",{staticClass:"filter-list filter-coin"},t._l(t.moneyList,function(e){return s("li",{class:{on:t.moneyVal===e},on:{click:function(s){t.moneySelected(e)}}},[t._v("\n                            "+t._s(e)+"\n                        ")])})),t._v(" "),s("span",{staticClass:"titles mr-top20"},[t._v(t._s(t.account.filterCoin[1]))]),t._v(" "),s("ul",{staticClass:"filter-list filter-coin"},t._l(t.coinList,function(e){return s("li",{class:{on:t.coinVal===e.code},on:{click:function(s){t.filterSelected("coin",e.code)}}},[t._v("\n                            "+t._s(t.coinType(e.code,2))+"\n                        ")])}))])])]),t._v(" "),s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.typeShow,expression:"typeShow"}],staticClass:"filter-popup"},[s("div",{staticClass:"mask",on:{click:function(e){t.filterHide("type")}}}),t._v(" "),s("div",{staticClass:"content"},[s("span",{staticClass:"titles"},[t._v(t._s(t.account.filterType[0]))]),t._v(" "),s("ul",{staticClass:"filter-list"},t._l(t.typeList,function(e){return s("li",{class:{on:t.typeVal===e.value},on:{click:function(s){t.filterSelected("type",e.value)}}},[t._v("\n                            "+t._s(e.text)+"\n                        ")])}))])])]),t._v(" "),s("picker-date",{on:{select:t.selectTime},model:{value:t.timeShow,callback:function(e){t.timeShow=e},expression:"timeShow"}}),t._v(" "),s("div",{staticClass:"filter-box",class:{"filter-history":"history"===t.orderType}},[s("span",{staticClass:"item",on:{click:function(e){t.filterShow("coin")}}},[s("span",{staticClass:"text"},[t._v(t._s(t.account.filterTitle[0]))]),t._v(" "),s("i",{staticClass:"arrows"})]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"history"===t.orderType,expression:"orderType === 'history'"}],staticClass:"item",on:{click:function(e){t.filterShow("type")}}},[s("span",{staticClass:"text"},[t._v(t._s(t.account.filterTitle[1]))]),t._v(" "),s("i",{staticClass:"arrows"})]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"history"===t.orderType,expression:"orderType === 'history'"}],staticClass:"item",on:{click:function(e){t.filterShow("time")}}},[s("span",{staticClass:"text"},[t._v(t._s(t.account.filterTitle[2]))]),t._v(" "),s("i",{staticClass:"arrows"})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"entrust"===t.orderType,expression:"orderType === 'entrust'"}],staticClass:"order-content"},[s("no-data",{directives:[{name:"show",rawName:"v-show",value:t.entrustEmpty,expression:"entrustEmpty"}]}),t._v(" "),s("scroller",{ref:"entrustScroll",attrs:{loadMore:!0,data:t.entrustData},on:{pullup:t.entrustLoad}},[s("order-list",{attrs:{orderData:t.entrustData,hasNumber:!0,limitPoint:t.limitPoint,hasBtn:!0,orderStatus:t.orderStatus},on:{"order-cancel":t.orderCancel}})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"history"===t.orderType,expression:"orderType === 'history'"}],staticClass:"order-content"},[s("no-data",{directives:[{name:"show",rawName:"v-show",value:t.historyEmpty,expression:"historyEmpty"}]}),t._v(" "),s("scroller",{ref:"historyScroll",attrs:{loadMore:!0,data:t.historyData},on:{pullup:t.historyLoad}},[s("order-list",{attrs:{orderData:t.historyData,hasNumber:!0,limitPoint:t.limitPoint,orderType:"history",orderStatus:t.orderStatus},on:{"order-cancel":t.orderCancel}})],1)],1)],1)],1)},staticRenderFns:[]};var f=s("VU/8")(y,p,!1,function(t){s("i530")},"data-v-3e44fd18",null);e.default=f.exports},i530:function(t,e){},nRsL:function(t,e,s){"use strict";var i=s("Dd8w"),a=s.n(i),o=s("NYxO"),r=s("sqAx"),n=s("aM/G"),l={name:"orderList",components:{NoData:r.a},props:{orderData:{type:Array,default:function(){return[]}},limitPoint:{type:Object,default:function(){return{}}},hasBtn:{type:Boolean,default:!1},hasNumber:{type:Boolean,default:!1},orderType:{type:String,default:"entrust"},orderStatus:{type:Object,default:function(){return{}}}},computed:a()({},Object(o.mapState)({trade:function(t){return t.lang.language.trade}})),data:function(){return{showValue:!1,limit:{}}},methods:{orderCancel:function(t){var e=this;this.$vn.confirm.show({text:e.trade.orderCancel[0],onConfirm:function(){Object(n._26)(e.$refs.order,{code:t.variety,id:t.id}).then(function(t){200===t.code?(e.$vn.toast.show(e.trade.orderCancel[1]),e.$emit("order-cancel")):(t.message=t.message||e.trade.orderCancel[2],e.$vn.toast.show(t.message))})}})},dealType:function(t){return"B"===t?this.trade.btn[0]:this.trade.btn[1]},coinType:function(t,e){return(t=t||"").split("_")[e]||""},goDetail:function(t){if(this.hasNumber&&"history"===this.orderType){var e=this.coinType(t.variety,2),s=this.coinType(t.variety,1);t.dealAmount=t.dealAmount||0,t.volume=t.volume||0,t.dealVolume=t.dealVolume||0,this.$f7router.navigate("/accountOrderDetail?id="+t.id+"&amount="+t.dealAmount+"&volume="+t.volume+"&dealVolume="+t.dealVolume+"&command="+t.command+"&coin="+e+"&unit="+s+"&status="+t.status)}}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"order",staticClass:"order-list-body",class:{"has-number":t.hasNumber}},t._l(t.orderData,function(e){return s("div",{staticClass:"order-list",on:{click:function(s){t.goDetail(e)}}},[t.hasNumber?s("div",{staticClass:"order-number"},[s("span",{staticClass:"number"},[t._v(t._s(t.trade.orderTitle[0])),t._v(" "+t._s(e.id))]),t._v(" "),"history"===t.orderType?s("span",{staticClass:"status"},[e.status===t.orderStatus.done?s("span",[t._v(t._s(t.trade.orderTitle[1]))]):t._e(),t._v(" "),e.status===t.orderStatus.someDone?s("span",[t._v(t._s(t.trade.orderTitle[4]))]):t._e(),t._v(" "),e.status===t.orderStatus.cancel?s("span",[t._v("\n                    "+t._s(t.trade.orderTitle[2]))]):t._e(),t._v(" "),s("i",{staticClass:"arrow"})]):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"info"},[s("span",{staticClass:"type",class:"B"===e.command?"rise":"drop"},[t._v(t._s(t.dealType(e.command))+" "+t._s(t.coinType(e.variety,2)))]),t._v(" "),s("span",{staticClass:"date"},[t._v(t._s(t.timeFormat(e.entrustTime)))])]),t._v(" "),t.hasBtn?s("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(s){t.orderCancel(e)}}},[t._v(t._s(t.trade.orderTitle[3])+"\n                ")]):t._e()]),t._v(" "),"entrust"===t.orderType?s("ul",[s("li",{staticClass:"text-box"},[t._v("\n                "+t._s(t.preventError(t.limitPoint,e.variety))+"\n                "),s("span",{staticClass:"explain"},[t._v(t._s(t.trade.orderList[0]))]),t._v(" "),s("span",{staticClass:"value"},[t._v(t._s(t.floatNum(e.price||"0",t.limitPoint[e.variety].price))+" "+t._s(t.coinType(e.variety,1)))])]),t._v(" "),s("li",{staticClass:"text-box"},[s("span",{staticClass:"explain"},[t._v(t._s(t.trade.orderList[1]))]),t._v(" "),s("span",{staticClass:"value"},[t._v(t._s(t.floatNum(e.volume||"0",t.limitPoint[e.variety].volume))+" "+t._s(t.coinType(e.variety,2)))])]),t._v(" "),s("li",{staticClass:"text-box"},[s("span",{staticClass:"explain"},[t._v(t._s(t.trade.orderList[2]))]),t._v(" "),s("span",{staticClass:"value"},[t._v(t._s(t.floatNum(e.dealVolume||"0",t.limitPoint[e.variety].volume))+" "+t._s(t.coinType(e.variety,2)))])]),t._v(" "),e.amount?s("li",{staticClass:"text-box"},[s("span",{staticClass:"explain"},[t._v(t._s(t.trade.orderList[3]))]),t._v(" "),s("span",{staticClass:"value"},[t._v(t._s(t.floatNum(e.amount||"0",t.limitPoint[e.variety].amount))+" "+t._s(t.coinType(e.variety,1)))])]):t._e()]):t._e(),t._v(" "),"history"===t.orderType?s("ul",[s("li",{staticClass:"text-box"},[s("span",{staticClass:"explain"},[t._v(t._s(t.trade.orderList[4]))]),t._v(" "),s("span",{staticClass:"value"},[t._v(t._s(t.floatNum(e.dealPrice||"0",t.limitPoint[e.variety].price))+" "+t._s(t.coinType(e.variety,1)))])]),t._v(" "),s("li",{staticClass:"text-box"},[s("span",{staticClass:"explain"},[t._v(t._s(t.trade.orderList[5]))]),t._v(" "),s("span",{staticClass:"value"},[t._v(t._s(t.floatNum(e.dealVolume||"0",t.limitPoint[e.variety].volume))+" "+t._s(t.coinType(e.variety,2)))])]),t._v(" "),s("li",{staticClass:"text-box"},[s("span",{staticClass:"explain"},[t._v(t._s(t.trade.orderList[3]))]),t._v(" "),s("span",{staticClass:"value"},[t._v(t._s(t.floatNum(e.dealAmount||"0",t.limitPoint[e.variety].volume))+" "+t._s(t.coinType(e.variety,1)))])])]):t._e()])}))},staticRenderFns:[]};var u=s("VU/8")(l,c,!1,function(t){s("DHRo")},"data-v-588116cc",null);e.a=u.exports}});